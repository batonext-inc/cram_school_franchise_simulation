<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>塾フランチャイズシミュレーション</title>
    <link rel="stylesheet" href="reset.css" />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div id="landing-overlay" class="landing-overlay">
      <section id="landing-screen" class="panel landing-screen">
        <p class="tagline">Franchise Management Simulation</p>
        <h1 class="sr-only">塾のフランチャイズオーナーになろう！</h1>
        <div class="landing-hero">
          <img
            src="assets/img/landing/landing-hero.png"
            alt="教室で経営を語り合うエージェントたちのイラスト"
            width="1376"
            height="768"
            loading="lazy"
          />
          <span class="hero-version">v1.0.0</span>
        </div>
        <p class="lead">
          5年間で複数校舎の経営を成功させ、全校舎の合計生徒数を最大化させましょう。
        </p>
        <div class="landing-actions">
          <button id="launch-game" class="primary primary-lg" type="button">新しく始める</button>
          <button id="continue-game" class="button-amber primary-lg" type="button">続きから始める</button>
          <button id="show-rules" class="secondary secondary-lg" type="button">ルール説明を見る</button>
        </div>
      </section>

      <section id="rules-screen" class="panel landing-screen landing-rules hidden" aria-hidden="true">
        <p class="tagline">How to Play</p>
        <h2>ゲームの基本ルール</h2>
        <p class="lead">
          X1年4月からX6年3月までの60ヶ月を運営し、全校舎の合計生徒数を最大化することが目的です。会話ガイドに従ってプレイヤー・塾名・初校舎を設定し、月次で意思決定を行いましょう。
        </p>
        <div class="rule-grid">
          <article class="rule-card">
            <h3>ターン進行</h3>
            <ul>
              <li>1ターン＝1ヶ月。4月に始まり翌年3月で年度切替。</li>
              <li>毎月の収支・満足度を確認し「次の月へ」で進める。</li>
            </ul>
          </article>
          <article class="rule-card">
            <h3>先生とクラス</h3>
            <ul>
              <li>先生1人で最大80人受け持ち可能、生徒は20人単位でクラス表示。</li>
              <li>不足すると採用モーダルが開き、採用完了まで進行不可。</li>
            </ul>
          </article>
          <article class="rule-card">
            <h3>広告と生徒流入</h3>
            <ul>
              <li>校舎ごとの広告プランで翌月以降の流入を強化。</li>
              <li>満足度・駅乗降客数・広告効果が流入補正に影響。</li>
            </ul>
          </article>
          <article class="rule-card">
            <h3>費用構造</h3>
            <ul>
              <li>家賃・先生給与・広告費・ロイヤリティ20万円/月を支払う。</li>
              <li>資金が尽きるとゲームオーバー。投資は慎重に。</li>
            </ul>
          </article>
          <article class="rule-card">
            <h3>満足度</h3>
            <ul>
              <li>先生の質や過密状態で±100の範囲を推移し、生徒流入に影響。</li>
              <li>高満足度を維持すると翌月以降の新規生徒が増えやすくなります。</li>
            </ul>
          </article>
          <article class="rule-card">
            <h3>セーブ / ロード</h3>
            <ul>
              <li>メイン画面のボタンからいつでもローカル保存・読込が可能。</li>
              <li>大きな意思決定の前にセーブしておくとリスクを抑えられます。</li>
            </ul>
          </article>
        </div>
        <div class="rule-list">
          <div class="rule-list-item">
            <h4>ゲームの目的</h4>
            <p>最終月（X6年3月）の全校舎の合計生徒数の最大化を目指します。複数校舎を開校して規模を拡大しましょう。</p>
          </div>
          <div class="rule-list-item">
            <h4>プレイヤーの技術介入</h4>
            <p>・先生を採用する際は、ランクや補正値だけでなく性格・専門領域から子どもに好かれるかを推測し、校舎ごとの弱点補完を考える必要があります。</p>
            <p>・広告プラン選択でも駅係数や満足度と掛け合わせて最大効率を狙うなど、データの読み解きが成果に直結します。</p>
          </div>
        </div>
        <div class="landing-actions">
          <button id="rules-back" class="secondary secondary-lg" type="button">戻る</button>
          <button id="launch-game-secondary" class="primary primary-lg" type="button">このままゲームを始める</button>
        </div>
      </section>
    </div>

    <section id="conversation-screen" class="conversation-overlay hidden">
      <div class="conversation-backdrop"></div>
      <div class="conversation-stage">
        <div class="conversation-content">
          <div id="conversation-input-area" class="conversation-input"></div>
          <p id="conversation-error" class="conversation-error hidden" role="alert"></p>
          <div id="app-shell" class="app-shell hidden">
            <main class="app-main">
              <section id="game-dashboard" class="hidden">
                <div class="dashboard-header">
                  <div class="dashboard-school-name">
                    <p id="current-school-name" class="dashboard-school-name-value">未設定</p>
                  </div>
                  <div class="dashboard-header-row">
                    <div class="dashboard-header-item">
                      <p class="dashboard-header-item-label">現在の年月</p>
                      <p id="current-date" class="dashboard-header-item-value">X1年4月</p>
                      <p id="elapsed-months" class="dashboard-header-item-sub">経過月数 0ヶ月</p>
                    </div>
                    <div class="dashboard-header-item">
                      <p class="dashboard-header-item-label">資金残高</p>
                      <p id="current-funds" class="dashboard-header-item-value">10,000,000円</p>
                    </div>
                    <div class="dashboard-header-item">
                      <p class="dashboard-header-item-label">生徒数</p>
                      <p id="metric-total-students" class="dashboard-header-item-value">0人</p>
                      <p id="metric-total-students-delta" class="metric-delta">前月比 ±0人</p>
                    </div>
                    <div class="dashboard-header-item">
                      <p class="dashboard-header-item-label">満足度</p>
                      <p id="metric-avg-satisfaction" class="dashboard-header-item-value">0.0</p>
                      <p id="metric-avg-satisfaction-delta" class="metric-delta">前月比 ±0.0pt</p>
                    </div>
                  </div>
                </div>
                <div class="dashboard-grid">
                  <div class="dashboard-left dashboard-panel">
                    <div id="campus-tabs" class="tabs"></div>
                    <div id="campus-detail" class="campus-detail">校舎情報がここに表示されます。</div>
                  </div>
                  <div class="dashboard-right dashboard-panel">
                    <div class="controls">
                      <button id="open-campus" class="secondary">新規開校</button>
                      <button id="toggle-ad" class="secondary">広告宣伝</button>
                      <button id="save-game" class="secondary">セーブ</button>
                      <button id="load-game" class="secondary">ロード</button>
                      <button id="next-month" class="primary">次の月へ</button>
                    </div>
                    <canvas id="finance-graph" width="400" height="220" class="graph"></canvas>
                  </div>
                </div>
              </section>
            </main>
          </div>
        </div>
        <div id="conversation-window" class="conversation-window">
          <button
            id="conversation-collapse"
            class="conversation-collapse"
            type="button"
            aria-label="会話ウィンドウを最小化"
          >
            <span aria-hidden="true">ー</span>
          </button>
          <div class="conversation-character">
            <img src="assets/img/people/secretary.png" alt="エージェント" width="1024" height="1024" />
            <div class="conversation-agent-label">
              <span class="name">エージェント 佐伯</span>
            </div>
          </div>
          <div class="conversation-dialog">
            <div id="conversation-text" class="conversation-text">
              <p id="conversation-line">こんにちは！起動準備が整いました。</p>
              <button
                id="conversation-next"
                class="conversation-advance"
                type="button"
                aria-label="次へ"
              >
                <span class="sr-only" id="conversation-next-label">次へ</span>
                <span class="conversation-advance-icon">▼</span>
              </button>
            </div>
          </div>
        </div>
        <button
          id="conversation-mini"
          class="conversation-mini hidden"
          type="button"
          aria-label="会話ウィンドウを表示"
        >
          <img src="assets/img/people/secretary.png" alt="エージェント" width="512" height="512" />
        </button>
      </div>
    </section>

    <div id="modal-layer" class="modal-layer hidden"></div>
    <div id="system-banner" class="system-banner hidden" role="alert"></div>

    <script type="module" src="main.js"></script>
  </body>
</html>
